<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Sensores Sistema Dom√≥tico</title>
	</head>
	<body>
		<form action="javascript:void(0);" onsubmit="javascript:enviar();">
			Valor a simular: <input type="label" id="val1" /><br />
			Sensor a simular:
			<select id="sensores">
				<option value="temperatura">Temperatura</option>
				<option value="luminosidad">Luminosidad</option>
			</select><br />
			<input type="submit" value="Simular" />
		</form>
		<span id="resul"></span>
		<span id="resultados"></span>
	</body>
	<script src="/socket.io/socket.io.js"></script>
	<script type="text/javascript">
		var serviceURL = document.URL;
		var socket = io.connect(serviceURL);

		function enviar() {
			var val1 = document.getElementById("val1").value;
			var sensor = document.getElementById("sensores").value;
			socket.emit('valores-captados',{sensor: sensor, valor : val1});
		}

				
		socket.on('my-address', function(data) {
			var d = new Date();
			socket.emit('obtener-registro',{sensor: 'temperatura'});	
		});

		
		socket.on('obtener-registro',function(data){
			actualizarLista(data);
		});



		function actualizarLista(usuarios){
			var listContainer = document.getElementById('resultados');
			listContainer.innerHTML = '';
			var listElement = document.createElement('ul');
			listContainer.appendChild(listElement);
			var num = usuarios.length;
			for(var i=0; i<num; i++) {
	            var listItem = document.createElement('li');
	            listItem.innerHTML = JSON.stringify(usuarios[i]);
	            listElement.appendChild(listItem);
			}
	    }

	</script>
</html>
